<?xml version="1.0" encoding="UTF-8"?>
<project name="cc-build" default="build" basedir="checkout">

    <property environment="env" />

    <path id="svn.classpath">
        <pathelement location="${env.SVNANT_HOME}/lib/svnjavahl.jar" />
        <pathelement location="${env.SVNANT_HOME}/lib/svnant.jar" />
        <pathelement location="${env.SVNANT_HOME}/lib/svnClientAdapter.jar" />
    </path>

    <typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="svn.classpath" />

    <target name="clean" description="Removes the content of the base build directory without removing the directory itself.">
        <echo level="info">Deleting build directory...</echo>
        <delete includeEmptyDirs="true">
            <fileset dir="." includes="**/*" defaultexcludes="no" />
        </delete>
    </target>

    <target name="build" depends="clean">
        <!-- Checkout the latest sources -->
        <svn>
            <property name="baseUrl" value="http://gamegineer.svn.sourceforge.net/svnroot/gamegineer/dev/trunk" />
            <property name="basePath" value="org.gamegineer.builder" />
            <property name="basePluginPath" value="${basePath}/plugins" />
            <property name="baseFeaturePath" value="${basePath}/features" />

            <!-- Builder -->
            <export srcUrl="${baseUrl}/org.gamegineer.builder" destPath="${basePath}" />

            <!-- Plugins -->
            <export srcUrl="${baseUrl}/net.jcip.annotations" destPath="${basePluginPath}/net.jcip.annotations" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.core" destPath="${basePluginPath}/org.gamegineer.common.core" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.core.tests" destPath="${basePluginPath}/org.gamegineer.common.core.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.persistence" destPath="${basePluginPath}/org.gamegineer.common.persistence" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.persistence.tests" destPath="${basePluginPath}/org.gamegineer.common.persistence.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.ui" destPath="${basePluginPath}/org.gamegineer.common.ui" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.ui.tests" destPath="${basePluginPath}/org.gamegineer.common.ui.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.core" destPath="${basePluginPath}/org.gamegineer.table.core" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.core.persistence.serializable" destPath="${basePluginPath}/org.gamegineer.table.core.persistence.serializable" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.core.persistence.serializable.tests" destPath="${basePluginPath}/org.gamegineer.table.core.persistence.serializable.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.core.tests" destPath="${basePluginPath}/org.gamegineer.table.core.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.net" destPath="${basePluginPath}/org.gamegineer.table.net" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.net.tests" destPath="${basePluginPath}/org.gamegineer.table.net.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.product" destPath="${basePluginPath}/org.gamegineer.table.product" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.product.tests" destPath="${basePluginPath}/org.gamegineer.table.product.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.ui" destPath="${basePluginPath}/org.gamegineer.table.ui" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.ui.tests" destPath="${basePluginPath}/org.gamegineer.table.ui.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.test.core" destPath="${basePluginPath}/org.gamegineer.test.core" />

            <!-- Features -->
            <export srcUrl="${baseUrl}/org.gamegineer.common.feature.base" destPath="${baseFeaturePath}/org.gamegineer.common.feature.base" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.feature.base.tests" destPath="${baseFeaturePath}/org.gamegineer.common.feature.base.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.feature.ui" destPath="${baseFeaturePath}/org.gamegineer.common.feature.ui" />
            <export srcUrl="${baseUrl}/org.gamegineer.common.feature.ui.tests" destPath="${baseFeaturePath}/org.gamegineer.common.feature.ui.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.feature.base" destPath="${baseFeaturePath}/org.gamegineer.table.feature.base" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.feature.base.tests" destPath="${baseFeaturePath}/org.gamegineer.table.feature.base.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.feature.ui" destPath="${baseFeaturePath}/org.gamegineer.table.feature.ui" />
            <export srcUrl="${baseUrl}/org.gamegineer.table.feature.ui.tests" destPath="${baseFeaturePath}/org.gamegineer.table.feature.ui.tests" />
            <export srcUrl="${baseUrl}/org.gamegineer.test.feature.base" destPath="${baseFeaturePath}/org.gamegineer.test.feature.base" />
        </svn>

        <!-- Call the target that does everything -->
        <ant antfile="run-build.xml" dir="org.gamegineer.builder" target="build" />
    </target>

</project>
