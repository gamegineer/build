<?xml version="1.0" encoding="UTF-8"?>
<cruisecontrol>

    <property environment="env" toupper="true" />
    <property name="scrubArtifactsScript" value="tools/ScrubArtifacts.pl" />

    <project name="config">
        <listeners>
            <currentbuildstatuslistener file="logs/${project.name}/status.txt" />
        </listeners>
        <bootstrappers>
            <svnbootstrapper file="config.xml" />
            <svnbootstrapper file="dashboard-config.xml" />
            <svnbootstrapper file="projects/${project.name}/build.xml" />
            <svnbootstrapper file="tools" />
        </bootstrappers>
        <schedule interval="60">
            <ant antWorkingDir="projects/${project.name}" target="publish" uselogger="true" />
        </schedule>
        <log>
            <delete every="1" unit="WEEK" ignoreSuffix="false" />
        </log>
    </project>

    <project name="gamegineer" buildafterfailed="false">
        <listeners>
            <currentbuildstatuslistener file="logs/${project.name}/status.txt" />
        </listeners>
        <bootstrappers>
            <svnbootstrapper file="projects/${project.name}/build.xml" />
        </bootstrappers>
        <modificationset quietperiod="60">
            <svn RepositoryLocation="http://svn.code.sf.net/p/gamegineer/code" />
        </modificationset>
        <schedule interval="60">
            <ant
                    anthome="${env.ANT_1_9_2_HOME}"
                    antWorkingDir="projects/${project.name}"
                    target="rebuild"
                    uselogger="true" />
        </schedule>
        <log dir="logs/${project.name}">
            <merge dir="projects/${project.name}/artifacts/test-results" />
            <delete every="1" unit="WEEK" ignoreSuffix="false" />
        </log>
        <publishers>
            <artifactspublisher
                    dest="artifacts/${project.name}"
                    dir="projects/${project.name}/artifacts" />
            <htmlemail
                    buildresultsurl="http://no-location"
                    defaultsuffix="@users.sourceforge.net"
                    mailhost="${env.CC_MAIL_HOST}"
                    mailport="${env.CC_MAIL_PORT}"
                    password="${env.CC_MAIL_PASSWORD}"
                    returnaddress="s_soloff@users.sourceforge.net"
                    username="${env.CC_MAIL_USERNAME}"
                    usessl="${env.CC_MAIL_USESSL}">
                <always address="s_soloff@users.sourceforge.net" />
            </htmlemail>
            <execute command="bash -c 'perl ${scrubArtifactsScript} logs/${project.name} artifacts/${project.name} run &gt; logs/${project.name}/scrub_artifacts.txt'" />
        </publishers>
    </project>

</cruisecontrol>
